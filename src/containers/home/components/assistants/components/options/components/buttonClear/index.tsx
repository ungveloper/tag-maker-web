import { useTranslation } from "next-i18next";
import { memo } from "react";
import isEqual from "react-fast-compare";
import { useSetRecoilState } from "recoil";
import { tagsAtom } from "@/containers/home/components/tags/stats";
import { InitOptionButton } from "@/containers/home/styles";
import { toast } from "react-toastify";

function ButtonClear(): JSX.Element {
  const { t } = useTranslation(["contents"]);
  const setText = useSetRecoilState(tagsAtom);

  const handleChangeOnClick = () => {
    try {
      setText("");
    } catch (e) {
      toast.error(t("errorMessage") + e);
    } finally {
      toast.success(t("successMessage"));
    }
  };

  return (
    <InitOptionButton onClick={handleChangeOnClick}>
      <svg viewBox="0 0 36 36">
        <path d="M30.375 6.75H23.625V5.0625C23.625 4.68984 23.5547 4.33125 23.4141 3.98672C23.2734 3.64219 23.0695 3.33281 22.8023 3.07266C22.5422 2.8125 22.2328 2.60156 21.8883 2.46094C21.5437 2.32031 21.1781 2.25 20.8125 2.25H15.1875C14.8148 2.25 14.4492 2.32031 14.1117 2.46094C13.7672 2.60156 13.4578 2.80547 13.1977 3.07266C12.9375 3.33281 12.7266 3.64219 12.5859 3.98672C12.4453 4.33125 12.375 4.69688 12.375 5.0625V6.75H5.625C5.00625 6.75 4.5 7.25625 4.5 7.875C4.5 8.49375 5.00625 9 5.625 9H6.82031L8.15625 30.4383C8.25469 32.3227 9.70312 33.75 11.5312 33.75H24.4688C26.3039 33.75 27.7242 32.3578 27.8438 30.4453L29.1797 9H30.375C30.9938 9 31.5 8.49375 31.5 7.875C31.5 7.25625 30.9938 6.75 30.375 6.75ZM14.625 5.0625C14.625 4.98516 14.6391 4.91484 14.6672 4.85156C14.6953 4.78125 14.7375 4.725 14.7867 4.66875C14.8359 4.61953 14.8992 4.57734 14.9695 4.54922C15.0398 4.52109 15.1102 4.50703 15.1875 4.50703H20.8125C20.8898 4.50703 20.9602 4.52109 21.0234 4.54922C21.0938 4.57734 21.15 4.61953 21.2063 4.66875C21.2555 4.71797 21.2977 4.78125 21.3258 4.85156C21.3539 4.92188 21.368 4.99219 21.368 5.06953V6.75703H14.618V5.0625H14.625ZM25.5938 30.3047C25.5516 31.0219 25.0945 31.5 24.4688 31.5H11.5312C10.8914 31.5 10.4414 31.0219 10.4062 30.3188C10.4062 30.3117 10.4062 30.3117 10.4062 30.3047L9.07031 9H26.9297L25.5938 30.3047Z" />
        <path d="M13.4999 29.2502C13.514 29.2502 13.5281 29.2502 13.5421 29.2502C14.1609 29.2291 14.646 28.7088 14.6249 28.083L14.0624 12.333C14.0413 11.7142 13.521 11.2291 12.8952 11.2502C12.2765 11.2713 11.7913 11.7916 11.8124 12.4174L12.3749 28.1674C12.396 28.7721 12.8952 29.2502 13.4999 29.2502Z" />
        <path d="M22.4577 29.2502C22.4718 29.2502 22.4859 29.2502 22.4999 29.2502C23.1046 29.2502 23.6038 28.7721 23.6249 28.1674L24.1874 12.4174C24.2085 11.7986 23.7234 11.2783 23.1046 11.2502C22.4859 11.2291 21.9656 11.7142 21.9374 12.333L21.3749 28.083C21.3538 28.7088 21.839 29.2291 22.4577 29.2502Z" />
        <path d="M18 29.25C18.6188 29.25 19.125 28.7438 19.125 28.125V12.375C19.125 11.7562 18.6188 11.25 18 11.25C17.3812 11.25 16.875 11.7562 16.875 12.375V28.125C16.875 28.7438 17.3812 29.25 18 29.25Z" />
      </svg>
      <span>{t("optionsClearTitle")}</span>
    </InitOptionButton>
  );
}

export default memo(ButtonClear, isEqual);
